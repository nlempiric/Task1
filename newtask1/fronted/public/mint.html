<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    <title>Document</title>
<style>

#d1
{
    border: 1px solid black;
    width: 540px;
    height: 530px;
    margin-top: 30px;
    background-color:rgb(196, 209, 222); 
     
}

.btn
{
    width: 369px;
    font-size: 16px;
}
.btn:hover
{
    opacity: 0.8;

    
}
#divh1
{
    margin-top: -10px;
    background-color: rgb(127, 155, 179); 

}
label
{
    font-size: 16px;
}
#divh2
{
    background-color: rgb(127, 155, 179);
}
#b1
{
    width: 540px;
    background-color: rgb(196, 209, 222);
    border: 1px solid black;
}
</style>
<!-- <script src="./mint.js"></script> -->
 <script type="module">
     import {mintfunction,buycontract,bal,tbal} from './mint.js'
    //  import {contract} from './app.js';

            window.addEventListener('load', async () => 
            {
               
                document.getElementById('add').setAttribute('value',buycontract.address);
            
            });

            document.getElementById("bt").onclick=function()
            {
                const a=document.getElementById('add').value;
                const t=document.getElementById('ta').value;
                console.log('address---------',a)
                console.log('tokens---------',t)
                mintfunction(a,t);
            };  
          
            document.getElementById('bl').onclick=function()
            {
                // bal();
                // const c=bal();
                console.log('----token balance-----',tbal);
                document.getElementById('lb').innerHTML=tbal;
            };
            document.getElementById('b1').onclick=async function()
     {
        try{
            if(ethereum)
            {

                const account = window.ethereum.request({
                    method: 'wallet_requestPermissions',
                    params: [{
                        eth_accounts: {},
                    }],
                }).then((permissions) => {
                const accountsPermission = permissions.find(
                (permission) => permission.parentCapability === 'eth_accounts'
                );
                if (accountsPermission) {
                console.log('account address--------',accountsPermission.caveats[0].value[0],'eth_accounts permission successfully requested!');
                const ab=accountsPermission.caveats[0].value[0];
                document.getElementById('add').setAttribute('value',ab);

                }
                }).catch((error) => {
                    if (error.code === 4001) {
                    } else {
                        alert(error.message);
                        console.error('error-----',error);
                    }
                }); 
            }
        }   
        catch(error)
        {
            console.log('error:---',error);
        }

    };

</script> 

</head>
<body>
    <center>
        <div id="d1">
            <div id="divh1"><h4 style="font-size: 28px;padding: 10px;color: rgb(255, 255, 255);font-weight: bold;">Mint Token</h4></div>

        <form>
            <br><br>
            
            <div class="form-inline">
                <div class="form-group">
                
                <label class="form-label">Contract Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                  <input type="text" class="form-control" id="add" value="" readonly>
                </div>
              </div>
              <br>
              
              <div class="form-inline">
                <div class="form-group">
                    <label class="form-label">Token Amount: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                  <input type="number" class="form-control" id="ta" placeholder="Enter Token to buy">
                </div>
              </div>
              <br>
              &nbsp;&nbsp;<button type="button" class="btn btn-default"  id="bt" onclick="mintfunction()">Mint</button>
        <br><br>
          </form>
          <br>
          <div id="divh2"><h4 style="font-size: 28px;color: rgb(255, 255, 255);padding: 10px;font-weight: bold;">Balance</h4></div>
          <br>
          <label id="lb">Balance</label><br><br>
          <button type="button" class="btn btn-default" id="bl">Check Balance</button>
          <br>
          
        </div>
        <br>
        <div>
            <button type="button"  id="b1" class="btn btn-default">Connect Wallet</button>
        </div>
</center>
</body>
</html>
